{"version":3,"file":"index.js","sources":["../../src/store/filter/createFilterQuery.js","../../src/store/world-setting/WorldSettingArrayStore.js","../../src/store/storeCallback.js"],"sourcesContent":["import { writable }        from 'svelte/store';\r\n\r\nimport { normalizeString } from '@typhonjs-svelte/lib/util';\r\n\r\n/**\r\n * Creates a filter function to compare objects by a give property key against a regex test. The returned function\r\n * is also a writable Svelte store that builds a regex from the stores value.\r\n *\r\n * This filter function can be used w/ DynArrayReducer and bound as a store to input elements.\r\n *\r\n * @param {string}   property - Property key to compare.\r\n *\r\n * @param {object}   [opts] - Optional parameters.\r\n *\r\n * @param {boolean}  [opts.caseSensitive=false] - When true regex test is case-sensitive.\r\n *\r\n * @returns {(data: object) => boolean} The query string filter.\r\n */\r\nexport function createFilterQuery(property, { caseSensitive = false } = {})\r\n{\r\n   let keyword = '';\r\n   let regex;\r\n   const storeKeyword = writable(keyword);\r\n\r\n   /**\r\n    * If there is no filter keyword / regex then do not filter otherwise filter based on the regex\r\n    * created from the search input element.\r\n    *\r\n    * @param {object} data - Data object to test against regex.\r\n    *\r\n    * @returns {boolean} AnimationStore filter state.\r\n    */\r\n   function filterQuery(data)\r\n   {\r\n      return keyword === '' || !regex ? true : regex.test(normalizeString(data?.[property]));\r\n   }\r\n\r\n   /**\r\n    * Create a custom store that changes when the search keyword changes.\r\n    *\r\n    * @param {(string) => void} handler - A callback function that accepts strings.\r\n    *\r\n    * @returns {import('svelte/store').Unsubscriber}\r\n    */\r\n   filterQuery.subscribe = (handler) =>\r\n   {\r\n      return storeKeyword.subscribe(handler);\r\n   };\r\n\r\n   /**\r\n    * Set\r\n    *\r\n    * @param {string}   value - A new value for the keyword / regex test.\r\n    */\r\n   filterQuery.set = (value) =>\r\n   {\r\n      if (typeof value === 'string')\r\n      {\r\n         keyword = normalizeString(value);\r\n         regex = new RegExp(RegExp.escape(keyword), caseSensitive ? '' : 'i');\r\n         storeKeyword.set(keyword);\r\n      }\r\n   };\r\n\r\n   return filterQuery;\r\n}\r\n","import {\r\n   DynArrayReducer,\r\n   isWritableStore,\r\n   TJSGameSettings } from '@typhonjs-fvtt/svelte/store';\r\n\r\nimport {\r\n   debounce,\r\n   isObject,\r\n   klona,\r\n   uuidv4 }          from '@typhonjs-fvtt/svelte/util';\r\n\r\n/**\r\n * @typedef {typeof import('svelte/store').Writable & { get id: string }} BaseEntryStore\r\n */\r\n\r\n/**\r\n * @template {BaseEntryStore} T\r\n */\r\nexport class WorldSettingArrayStore {\r\n   /** @type {T[]} */\r\n   #data = [];\r\n\r\n   /**\r\n    * @type {Map<string, T>}\r\n    */\r\n   #dataMap = new Map();\r\n\r\n   /**\r\n    * @type {DynArrayReducer<T>}\r\n    */\r\n   #dataReducer = new DynArrayReducer({ data: this.#data });\r\n\r\n   /** @type {string} */\r\n   #key;\r\n\r\n   #StoreClass;\r\n\r\n   /**\r\n    * Stores the subscribers.\r\n    *\r\n    * @type {(function(T[]): void)[]}\r\n    */\r\n   #subscriptions = [];\r\n\r\n   /**\r\n    * @type {Function}\r\n    */\r\n   #updateSubscribersBound;\r\n\r\n   /**\r\n    * @returns {WorldSettingEntryStore}\r\n    * @constructor\r\n    */\r\n   static get EntryStore() { return WorldSettingEntryStore; }\r\n\r\n   /**\r\n    *\r\n    * @param {TJSGameSettings}   gameSettings - An instance of TJSGameSettings.\r\n    *\r\n    * @param {string}            moduleId - Game setting 'moduleId' field.\r\n    *\r\n    * @param {string}            key - Game setting 'key' field.\r\n    *\r\n    * @param {BaseEntryStore}    StoreClass - The entry store class that is instantiated.\r\n    *\r\n    * @param {object[]}          defaultData - An array of default data objects.\r\n    */\r\n   constructor({ gameSettings, moduleId, key, StoreClass, defaultData = [] } = {})\r\n   {\r\n      if (gameSettings !== void 0)\r\n      {\r\n         if (!(gameSettings instanceof TJSGameSettings))\r\n         {\r\n            throw new TypeError(`'gameSettings' is not an instance of TJSGameSettings.`);\r\n         }\r\n\r\n         if (typeof key !== 'string') { throw new TypeError(`'key' is not a string.`); }\r\n         if (typeof moduleId !== 'string') { throw new TypeError(`'moduleId' is not a string.`); }\r\n      }\r\n\r\n      if (!isWritableStore(StoreClass.prototype))\r\n      {\r\n         throw new TypeError(`'StoreClass' is not a writable store constructor.`);\r\n      }\r\n\r\n      let hasIDGetter = false\r\n\r\n      // Walk parent prototype chain. Check for descriptor at each prototype level.\r\n      for (let o = StoreClass.prototype; o; o = Object.getPrototypeOf(o))\r\n      {\r\n         const descriptor = Object.getOwnPropertyDescriptor(o, 'id');\r\n         if (descriptor !== void 0 && descriptor.get !== void 0)\r\n         {\r\n            hasIDGetter = true;\r\n            break;\r\n         }\r\n      }\r\n\r\n      if (!hasIDGetter)\r\n      {\r\n         throw new TypeError(`'StoreClass' does not have a getter accessor for 'id' property.`);\r\n      }\r\n\r\n      if (!Array.isArray(defaultData)) { throw new TypeError(`'defaultData' is not an array.`); }\r\n\r\n      this.#key = key;\r\n      this.#StoreClass = StoreClass;\r\n\r\n      this.#updateSubscribersBound = debounce(this._updateSubscribers.bind(this), 500);\r\n\r\n      for (let cntr = 0; cntr < defaultData.length; cntr++)\r\n      {\r\n         const entryData = defaultData[cntr];\r\n\r\n         if (!isObject(entryData)) { throw new TypeError(`'defaultData[${cntr}] is not an object.`); }\r\n\r\n         if (typeof entryData.id !== 'string') { throw new TypeError(`'defaultData[${cntr}].id' is not a string.`); }\r\n\r\n         this.#addStore(entryData);\r\n      }\r\n\r\n      if (gameSettings)\r\n      {\r\n         gameSettings.register({\r\n            moduleId,\r\n            key,\r\n            store: this,\r\n            options: {\r\n               scope: 'world',\r\n               config: false,\r\n               default: defaultData,\r\n               type: Array\r\n            }\r\n         });\r\n      }\r\n   }\r\n\r\n   /**\r\n    * @returns {T[]}\r\n    * @protected\r\n    */\r\n   get _data() { return this.#data; }\r\n\r\n   /**\r\n    * @returns {DynArrayReducer<T>}\r\n    */\r\n   get dataReducer() { return this.#dataReducer; }\r\n\r\n   /**\r\n    * @returns {string}\r\n    */\r\n   get key() { return this.#key; }\r\n\r\n   /**\r\n    * Adds a new store from given data.\r\n    *\r\n    * @param {object}   entryData -\r\n    *\r\n    * @returns {*}\r\n    */\r\n   add(entryData = {})\r\n   {\r\n      if (!isObject(entryData)) { throw new TypeError(`'entryData' is not an object.`); }\r\n\r\n      if (typeof entryData.id !== 'string') { entryData.id = uuidv4(); }\r\n\r\n      if (this.#data.findIndex((entry) => entry.id === entryData.id) >= 0)\r\n      {\r\n         throw new Error(`'entryData.id' (${entryData.id}) already in this WorldSettingArrayStore instance.`)\r\n      }\r\n\r\n      const store = this.#addStore(entryData);\r\n\r\n      this._updateSubscribers();\r\n\r\n      return store;\r\n   }\r\n\r\n   /**\r\n    * Add a new store entry from the given data.\r\n    *\r\n    * @param {object}   entryData\r\n    *\r\n    * @returns {T} New store entry instance.\r\n    */\r\n   #addStore(entryData)\r\n   {\r\n      const store = new this.#StoreClass(entryData, this);\r\n\r\n      if (!uuidv4.isValid(store.id))\r\n      {\r\n         throw new Error(`'store.id' (${store.id}) is not a UUIDv4 compliant string.`);\r\n      }\r\n\r\n      this.#data.push(store);\r\n      this.#dataMap.set(entryData.id, store);\r\n\r\n      return store;\r\n   }\r\n\r\n   /**\r\n    * Deletes a given entry store by ID from this world setting array store instance.\r\n    *\r\n    * @param {string}  id - ID of entry to delete.\r\n    *\r\n    * @returns {boolean} Delete operation successful.\r\n    */\r\n   delete(id) {\r\n      if (typeof id !== 'string') { throw new TypeError(`'id' is not a string.`); }\r\n\r\n      const index = this.#data.findIndex((entry) => entry.id === id);\r\n\r\n      if (index >= 0)\r\n      {\r\n         const store = this.#data[index];\r\n\r\n         store?.destroy?.(); // TODO: Figure out if there is a way to create clean entry stores.\r\n\r\n         this.#data.splice(index, 1);\r\n         this.#dataMap.delete(store.id);\r\n\r\n         this._updateSubscribers();\r\n\r\n         return true;\r\n      }\r\n\r\n      return false;\r\n   }\r\n\r\n   /**\r\n    * Duplicates an entry store by the given ID.\r\n    *\r\n    * @param {string}   id - UUIDv4 string.\r\n    *\r\n    * @returns {*} Instance of StoreClass.\r\n    */\r\n   duplicate(id)\r\n   {\r\n      if (typeof id !== 'string') { throw new TypeError(`'id' is not a string.`); }\r\n\r\n      const index = this.#data.findIndex((entry) => entry.id === id);\r\n\r\n      if (index >= 0)\r\n      {\r\n         const entryStore = this.#data[index];\r\n\r\n         const data = klona(entryStore.toJSON());\r\n         data.id = uuidv4();\r\n\r\n         if (typeof data?.name === 'string')\r\n         {\r\n            let cntr = 1;\r\n            const baseName = data.name ?? '';\r\n\r\n            do\r\n            {\r\n               data.name = `${baseName}-${cntr++}`;\r\n            } while (this.#data.findIndex((entry) => entry.name === data.name) >= 0);\r\n         }\r\n\r\n         return this.add(data);\r\n      }\r\n\r\n      return void 0;\r\n   }\r\n\r\n   /**\r\n    * Finds an entry store instance by 'id' / UUIDv4.\r\n    *\r\n    * @param {string}   id - A UUIDv4 string.\r\n    *\r\n    * @returns {T|void} Entry store instance.\r\n    */\r\n   find(id)\r\n   {\r\n      return this.#dataMap.get(id);\r\n   }\r\n\r\n   /**\r\n    * Sets the children store data by 'id', adds new entry store instances, or removes entries that are no longer in the\r\n    * update list.\r\n    *\r\n    * @param {T[]}   updateList\r\n    */\r\n   set(updateList)\r\n   {\r\n      if (!Array.isArray(updateList)) { throw new TypeError(`'updateList' is not an Array.`); }\r\n\r\n      const data = this.#data;\r\n      const dataMap = this.#dataMap;\r\n\r\n      // Create a set of all current entry IDs.\r\n      const removeIDSet = new Set(dataMap.keys());\r\n\r\n      let rebuildIndex = false;\r\n\r\n      for (let updateIndex = 0; updateIndex < updateList.length; updateIndex++)\r\n      {\r\n         const updateData = updateList[updateIndex];\r\n\r\n         const id = updateData.id;\r\n\r\n         if (typeof id !== 'string') { throw new Error(`'updateData.id' is not a string.`)}\r\n\r\n         const localIndex = data.findIndex((entry) => entry.id === id);\r\n\r\n         if (localIndex >= 0)\r\n         {\r\n            const localEntry = data[localIndex];\r\n\r\n            // Update the entry data.\r\n            localEntry.set(updateData);\r\n\r\n            // Must move to correct position\r\n            if (localIndex !== updateIndex)\r\n            {\r\n               // Remove from current location.\r\n               data.splice(localIndex, 1);\r\n\r\n               if (updateIndex < data.length)\r\n               {\r\n                  // Insert at new location.\r\n                  data.splice(updateIndex, 0, localEntry);\r\n               }\r\n               else\r\n               {\r\n                  // Local data length is less than update data index; rebuild index.\r\n                  rebuildIndex = true;\r\n               }\r\n            }\r\n\r\n            // Delete from removeIDSet as entry is still in local data.\r\n            removeIDSet.delete(id);\r\n         }\r\n         else\r\n         {\r\n            this.#addStore(updateData);\r\n         }\r\n      }\r\n\r\n      if (rebuildIndex)\r\n      {\r\n         data.length = 0;\r\n         dataMap.clear();\r\n\r\n         for (const updateData of updateList) { this.#addStore(updateData); }\r\n      }\r\n      else\r\n      {\r\n         // Remove entries that are no longer in data.\r\n         for (const id of removeIDSet)\r\n         {\r\n            const index = data.findIndex((entry) => entry.id === id);\r\n            if (index >= 0)\r\n            {\r\n               data[index].destroy();\r\n               data.splice(index, 1);\r\n               dataMap.delete(id);\r\n            }\r\n         }\r\n      }\r\n\r\n      this._updateSubscribers();\r\n   }\r\n\r\n   toJSON()\r\n   {\r\n      return this.#data;\r\n   }\r\n\r\n// -------------------------------------------------------------------------------------------------------------------\r\n\r\n   /**\r\n    * @param {function(T[]): void} handler - Callback function that is invoked on update / changes.\r\n    *\r\n    * @returns {(function(): void)} Unsubscribe function.\r\n    */\r\n   subscribe(handler)\r\n   {\r\n      this.#subscriptions.push(handler); // add handler to the array of subscribers\r\n\r\n      handler(this.#data);                     // call handler with current value\r\n\r\n      // Return unsubscribe function.\r\n      return () =>\r\n      {\r\n         const index = this.#subscriptions.findIndex((sub) => sub === handler);\r\n         if (index >= 0) { this.#subscriptions.splice(index, 1); }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * @package\r\n    */\r\n   _updateSubscribers()\r\n   {\r\n      const subscriptions = this.#subscriptions;\r\n\r\n      const data = this.#data;\r\n\r\n      for (let cntr = 0; cntr < subscriptions.length; cntr++) { subscriptions[cntr](data); }\r\n\r\n      // This will update the filtered data and `dataReducer` store and forces an update to subscribers.\r\n      this.#dataReducer.index.update(true);\r\n   }\r\n}\r\n\r\nclass WorldSettingEntryStore\r\n{\r\n   /**\r\n    * @type {object}\r\n    */\r\n   #data;\r\n\r\n   /**\r\n    * Stores the subscribers.\r\n    *\r\n    * @type {(function(object): void)[]}\r\n    */\r\n   #subscriptions = [];\r\n\r\n   /**\r\n    * @param {object}   data -\r\n    */\r\n   constructor(data = {})\r\n   {\r\n      if (!isObject(data)) { throw new TypeError(`'data' is not an object.`); }\r\n\r\n      this.#data = data;\r\n\r\n      // If an id is missing then add it.\r\n      if (typeof data.id !== 'string') { this.#data.id = uuidv4(); }\r\n\r\n      if (!uuidv4.isValid(data.id)) { throw new Error(`'data.id' (${data.id}) is not a valid UUIDv4 string.`)}\r\n   }\r\n\r\n   /**\r\n    * @returns {object}\r\n    * @protected\r\n    */\r\n   get _data() { return this.#data; }\r\n\r\n   // ----------------------------------------------------------------------------------------------------------------\r\n\r\n   /**\r\n    * @returns {string}\r\n    */\r\n   get id() { return this.#data.id; }\r\n\r\n   toJSON()\r\n   {\r\n      return this.#data;\r\n   }\r\n\r\n   /**\r\n    * @param {function(object): void} handler - Callback function that is invoked on update / changes.\r\n    *\r\n    * @returns {(function(): void)} Unsubscribe function.\r\n    */\r\n   subscribe(handler)\r\n   {\r\n      this.#subscriptions.push(handler);  // add handler to the array of subscribers\r\n\r\n      handler(this.#data);                // call handler with current value\r\n\r\n      // Return unsubscribe function.\r\n      return () =>\r\n      {\r\n         const index = this.#subscriptions.findIndex((sub) => sub === handler);\r\n         if (index >= 0) { this.#subscriptions.splice(index, 1); }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * @protected\r\n    */\r\n   _updateSubscribers()\r\n   {\r\n      const subscriptions = this.#subscriptions;\r\n\r\n      const data = this.#data;\r\n\r\n      for (let cntr = 0; cntr < subscriptions.length; cntr++) { subscriptions[cntr](data); }\r\n   }\r\n}\r\n","import { isWritableStore } from '@typhonjs-svelte/lib/store';\r\n\r\n/**\r\n * Wraps a writable stores set method invoking a callback after the store is set. This allows parent / child\r\n * relationships between stores to update directly without having to subscribe to the child store. This is a particular\r\n * powerful pattern when the `setCallback` is a debounced function that syncs a parent store and / or serializes data.\r\n *\r\n * @param {import('svelte/store').Writable} store - A store to wrap.\r\n *\r\n * @param {(store?: import('svelte/store').Writable, value?: *) => void} setCallback - A callback to invoke after store\r\n *                                                                                     set.\r\n *\r\n * @returns {import('svelte/store').Writable} Wrapped store.\r\n */\r\nexport function storeCallback(store, setCallback)\r\n{\r\n   if (!isWritableStore(store)) { throw new TypeError(`'store' is not a writable store.`); }\r\n   if (typeof setCallback !== 'function') { throw new TypeError(`'setCallback' is not a function.`); }\r\n\r\n   /** @type {import('svelte/store').Writable} */\r\n   const wrapper = {\r\n      set: (value) => {\r\n         store.set(value);\r\n         setCallback(store, value);\r\n      },\r\n\r\n      subscribe: store.subscribe,\r\n\r\n      update: typeof store.update === 'function' ? store.update : void 0\r\n   };\r\n\r\n   Object.freeze(wrapper);\r\n\r\n   return wrapper;\r\n}\r\n"],"names":["isWritableStore"],"mappings":"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"}