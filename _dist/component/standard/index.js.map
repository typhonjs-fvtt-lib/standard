{"version":3,"file":"index.js","sources":["../../../src/internal/StyleManager.js","../../../src/internal/cssVariables.js","../../../src/internal/FoundryStyles.js","../../../src/component/standard/button/TJSToggleIconButton.svelte","../../../src/component/standard/folder/TJSFolder.svelte","../../../src/component/standard/menu/TJSMenu.svelte","../../../src/component/standard/menu/context/TJSContextMenu.svelte","../../../src/component/standard/select/TJSSelect.svelte","../../../src/component/standard/TJSStyleProperties.svelte","../../../src/component/standard/index.js"],"sourcesContent":["/**\r\n * First pass at a system to create a unique style sheet for the UI library that loads default values for all CSS\r\n * variables.\r\n */\r\nexport class StyleManager\r\n{\r\n   #selector;\r\n   #styleElement;\r\n   #cssRule;\r\n\r\n   /**\r\n    *\r\n    * @param selector\r\n    * @param {string}   docKey\r\n    */\r\n   constructor({ selector = ':root', docKey } = {})\r\n   {\r\n      if (typeof selector !== 'string') { throw new TypeError(`StyleManager error: 'selector' is not a string.`); }\r\n      if (typeof docKey !== 'string') { throw new TypeError(`StyleManager error: 'docKey' is not a string.`); }\r\n\r\n      this.#selector = selector;\r\n\r\n      if (document[docKey] === void 0)\r\n      {\r\n         this.#styleElement = document.createElement('style');\r\n\r\n         document.head.append(this.#styleElement);\r\n\r\n         this.#styleElement.sheet.insertRule(`${selector} {}`, 0);\r\n\r\n         this.#cssRule = this.#styleElement.sheet.cssRules[0];\r\n\r\n         document[docKey] = this.#styleElement;\r\n      }\r\n      else\r\n      {\r\n         this.#styleElement = document[docKey];\r\n         this.#cssRule = this.#styleElement.sheet.cssRules[0];\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Set rules by property / value; useful for CSS variables.\r\n    *\r\n    * @param {Object<string, string>}  rules - An object with property / value string pairs to load.\r\n    *\r\n    * @param {boolean}                 [overwrite=false] - When true overwrites any existing values.\r\n    */\r\n   set(rules, overwrite = false)\r\n   {\r\n      if (overwrite)\r\n      {\r\n         for (const [key, value] of Object.entries(rules))\r\n         {\r\n            this.#cssRule.style.setProperty(key, value);\r\n         }\r\n      }\r\n      else\r\n      {\r\n         // Only set property keys for entries that don't have an existing rule set.\r\n         for (const [key, value] of Object.entries(rules))\r\n         {\r\n            if (this.#cssRule.style.getPropertyValue(key) === '')\r\n            {\r\n               this.#cssRule.style.setProperty(key, value);\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes the property keys specified. If `keys` is a string a single property is removed. Or if `keys` is an\r\n    * iterable list then all property keys in the list are removed.\r\n    *\r\n    * @param {string|Iterable<string>} keys - The property keys to remove.\r\n    */\r\n   remove(keys)\r\n   {\r\n      if (Array.isArray(keys))\r\n      {\r\n         for (const key of keys)\r\n         {\r\n            if (typeof key === 'string') { this.#cssRule.style.removeProperty(key); }\r\n         }\r\n      }\r\n      else if (typeof keys === 'string')\r\n      {\r\n         this.#cssRule.style.removeProperty(keys);\r\n      }\r\n   }\r\n}","import { StyleManager } from './StyleManager.js';\r\n\r\nconst s_STYLE_KEY = '#__tjs-root-styles';\r\n\r\nconst cssVariables = new StyleManager({ docKey: s_STYLE_KEY });\r\n\r\nexport { cssVariables };","/**\r\n * Parses the core Foundry style sheet creating an indexed object of properties by selector.\r\n */\r\nexport class FoundryStyles\r\n{\r\n   static #sheet = void 0;\r\n\r\n   static #sheetMap = new Map();\r\n\r\n   static #initialized = false;\r\n\r\n   /**\r\n    * Called once on initialization / first usage. Parses the core foundry style sheet.\r\n    */\r\n   static #initialize()\r\n   {\r\n      this.#initialized = true;\r\n\r\n      const styleSheets = Array.from(document.styleSheets).filter((sheet) => sheet.href !== null);\r\n\r\n      let sheet;\r\n\r\n      // Find the core Foundry stylesheet.\r\n      for (const styleSheet of styleSheets)\r\n      {\r\n         let url;\r\n\r\n         try { url = new URL(styleSheet.href); } catch (err) { continue; }\r\n\r\n         if (url.pathname === '/css/style.css')\r\n         {\r\n            this.#sheet = sheet = styleSheet;\r\n            break;\r\n         }\r\n      }\r\n\r\n      // Quit now if the Foundry style sheet was not found.\r\n      if (!sheet) { return; }\r\n\r\n      // Parse each CSSStyleRule and build the map of selectors to parsed properties.\r\n      for (const rule of sheet.cssRules)\r\n      {\r\n         if (!(rule instanceof CSSStyleRule)) { continue; }\r\n\r\n         // Split on attributes and filter out any non-strings / empty strings then trim results.\r\n         const data = rule.style.cssText.split(';').filter((d) => typeof d === 'string' && d !== '').map(\r\n          (d) => d.trim());\r\n\r\n         // Split property and value.\r\n         const result = data.map((entry) => entry.split(':').map((d) => d.trim()));\r\n\r\n         // Create an object indexing property / value.\r\n         this.#sheetMap.set(rule.selectorText, Object.fromEntries(result));\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Gets the properties object associated with the selector. Try and use a direct match otherwise all keys\r\n    * are iterated to find a selector string that includes the `selector`.\r\n    *\r\n    * @param {string}   selector - Selector to find.\r\n    *\r\n    * @returns {Object<string, string>} Properties object.\r\n    */\r\n   static getProperties(selector)\r\n   {\r\n      if (!this.#initialized) { this.#initialize(); }\r\n\r\n      // If there is a direct selector match then return a value immediately.\r\n      if (this.#sheetMap.has(selector))\r\n      {\r\n         return this.#sheetMap.get(selector);\r\n      }\r\n\r\n      for (const key of this.#sheetMap.keys())\r\n      {\r\n         if (key.includes(selector)) { return this.#sheetMap.get(key); }\r\n      }\r\n\r\n      return void 0;\r\n   }\r\n\r\n   /**\r\n    * Gets a specific property value from the given `selector` and `property` key. Try and use a direct selector\r\n    * match otherwise all keys are iterated to find a selector string that includes `selector`.\r\n    *\r\n    * @param {string}   selector - Selector to find.\r\n    *\r\n    * @param {string}   property - Specific property to locate.\r\n    *\r\n    * @returns {string|undefined} Property value.\r\n    */\r\n   static getProperty(selector, property)\r\n   {\r\n      if (!this.#initialized) { this.#initialize(); }\r\n\r\n      // If there is a direct selector match then return a value immediately.\r\n      if (this.#sheetMap.has(selector))\r\n      {\r\n         const data = this.#sheetMap.get(selector);\r\n         return typeof data === 'object' && property in data ? data[property] : void 0;\r\n      }\r\n\r\n      for (const key of this.#sheetMap.keys())\r\n      {\r\n         if (key.includes(selector))\r\n         {\r\n            const data = this.#sheetMap.get(key);\r\n            if (typeof data === 'object' && property in data) { return data[property]; }\r\n         }\r\n      }\r\n\r\n      return void 0;\r\n   }\r\n}","<script>\r\n   /**\r\n    * --tjs-icon-button-background\r\n    * --tjs-icon-button-background-hover\r\n    * --tjs-icon-button-background-selected\r\n    * --tjs-icon-button-border-radius\r\n    * --tjs-icon-button-clip-path\r\n    * --tjs-icon-button-diameter\r\n    * --tjs-icon-button-transition\r\n    */\r\n   import { applyStyles }  from '@typhonjs-fvtt/svelte-standard/action';\r\n   import { localize }     from '@typhonjs-svelte/lib/helper';\r\n\r\n   export let button;\r\n   export let icon;\r\n   export let title;\r\n   export let store;\r\n   export let styles;\r\n   export let efx;\r\n\r\n   $: icon = typeof button === 'object' && typeof button.icon === 'string' ? button.icon :\r\n    typeof icon === 'string' ? icon : '';\r\n   $: title = typeof button === 'object' && typeof button.title === 'string' ? button.title :\r\n    typeof title === 'string' ? title : '';\r\n   $: store = typeof button === 'object' && typeof button.store === 'object' ? button.store :\r\n    typeof store === 'object' ? store : void 0;\r\n   $: styles = typeof button === 'object' && typeof button.styles === 'object' ? button.styles :\r\n    typeof styles === 'object' ? styles : void 0;\r\n   $: efx = typeof button === 'object' && typeof button.efx === 'function' ? button.efx :\r\n    typeof efx === 'function' ? efx : () => {};\r\n\r\n   let selected = false;\r\n\r\n   $: if (store) { selected = $store; }\r\n\r\n   function onClick()\r\n   {\r\n      selected = !selected;\r\n      if (store) { store.set(selected); }\r\n   }\r\n\r\n   /**\r\n    * Handles `close` event from any children elements.\r\n    */\r\n   function onClose()\r\n   {\r\n      selected = false;\r\n      if (store) { store.set(false); }\r\n   }\r\n</script>\r\n\r\n<div on:close on:close|preventDefault|stopPropagation={onClose} use:applyStyles={styles}>\r\n   <a on:click on:click={onClick} use:efx class:selected>\r\n      <i class={icon} class:selected title={localize(title)}></i>\r\n   </a>\r\n   {#if selected}\r\n      <slot/>\r\n   {/if}\r\n</div>\r\n\r\n<style>\r\n   div {\r\n      display: block;\r\n      flex: 0 0 var(--tjs-icon-button-diameter);\r\n      height: var(--tjs-icon-button-diameter);\r\n      width: var(--tjs-icon-button-diameter);\r\n      align-self: center;\r\n      text-align: center;\r\n   }\r\n\r\n   a {\r\n      display: inline-block;\r\n      background: var(--tjs-icon-button-background);\r\n      border-radius: var(--tjs-icon-button-border-radius);\r\n      position: relative;\r\n      overflow: hidden;\r\n      clip-path: var(--tjs-icon-button-clip-path);\r\n      transform-style: preserve-3d;\r\n      width: 100%;\r\n      height: 100%;\r\n      transition: var(--tjs-icon-button-transition);\r\n   }\r\n\r\n   a:hover {\r\n      background: var(--tjs-icon-button-background-hover);\r\n   }\r\n\r\n   a.selected {\r\n      background: var(--tjs-icon-button-background-selected);\r\n   }\r\n\r\n   i {\r\n      line-height: var(--tjs-icon-button-diameter);\r\n      transform: translateZ(1px);\r\n   }\r\n</style>\r\n","<script>\r\n   /**\r\n    * TJSFolder provides a collapsible folder using the details and summary HTMLElements.\r\n    *\r\n    * This is a slotted component. The default slot is the collapsible contents. There are also two additional optional\r\n    * named slots available for the summary element. `label` allows setting custom content with the fallback being the\r\n    * `label` string. Additionally, `summary-end` allows a component or text to be slotted after the label. This can be\r\n    * useful for say an \"expand all\" button.\r\n    *\r\n    * ----------------------------------------------------------------------------------------------------------------\r\n    * Exported props include:\r\n    * `folder`: An object containing id (any), label (string), store (writable boolean)\r\n    *\r\n    * Or in lieu of passing the folder object you can assign these props directly:\r\n    * `id`: Anything used for an ID.\r\n    * `label`: The label name of the folder; string.\r\n    * `store`: The store tracking the open / close state: writable<boolean>\r\n    *\r\n    * The final prop is `styles` which follows the `applyStyles` action; see `applyStyles` or `StylesProperties`\r\n    * component for more information. This is an object that applies inline styles.\r\n    *\r\n    * ----------------------------------------------------------------------------------------------------------------\r\n    * Events: There are several events that are fired and / or bubbled up through parents. There are four\r\n    * custom events that pass a details object including: `the details element, id, label, and store`.\r\n    *\r\n    * The following events are bubbled up such that assigning a listener in any parent component receives them\r\n    * from all children folders:\r\n    * `click` - Basic MouseEvent of folder being clicked.\r\n    * `closeAny` - Triggered when any child folder is closed w/ details object.\r\n    * `openAny` - Triggered when any child folder is opened w/ details object.\r\n    *\r\n    * The following events do not propagate / bubble up and can be registered with:\r\n    * `close` - Triggered when direct descendent folder is closed w/ details object.\r\n    * `open` - Triggered when direct descendent folder is opened w/ details object.\r\n    *\r\n    * ----------------------------------------------------------------------------------------------------------------\r\n    * Styling: To style this component use `details.tjs-folder` as a selector. Each element also contains data\r\n    * attributes for `id` and `label`.\r\n    *\r\n    * There are several local CSS variables that you can use to change the appearance dynamically. Either use\r\n    * CSS props or pass in a `styles` object w/ key / value props to set to the details. Another alternative is using\r\n    * `StyleProperties` component which wraps a section in locally defined CSS variables. Useful for a large group of\r\n    * folders where the goal is changing the appearance of all of them as a group.\r\n    *\r\n    * The following CSS variables are supported, but not defined by default.\r\n    *\r\n    * Details element (attributes follow `--tjs-details-`):\r\n    * --tjs-details-padding-left: 5px; set for children to indent more;\r\n    *\r\n    * Summary element (attributes follow `--tjs-summary-`):\r\n    * --tjs-summary-background-blend-mode: initial\r\n    * --tjs-summary-background: none\r\n    * --tjs-summary-border: none\r\n    * --tjs-summary-cursor: pointer\r\n    * --tjs-summary-font-size: inherit\r\n    * --tjs-summary-font-weight: bold\r\n    * --tjs-summary-padding: 4px\r\n    * --tjs-summary-width: fit-content; wraps content initially, set to 100% or other width measurement\r\n    *\r\n    * Summary SVG / chevron element (attributes follow `--tjs-summary-chevron-`):\r\n    *\r\n    * The width and height use multiple fallback variables before setting a default of 15px. You can provide\r\n    * `--tjs-summary-chevron-size`. If not provided then the chevron dimensions are set by `--tjs-summary-font-size`.\r\n    *\r\n    * --tjs-summary-chevron-color: currentColor\r\n    * --tjs-summary-chevron-opacity: 0.2; Opacity when not hovering.\r\n    * --tjs-summary-chevron-rotate-closed: -90deg; rotation angle when closed.\r\n    * --tjs-summary-chevron-opacity-hover: 1; Opacity when hovering.\r\n    * --tjs-summary-chevron-rotate-open: 0; rotation angle when open.\r\n    *\r\n    * Contents element (attributes follow `--tjs-contents-`):\r\n    * --tjs-contents-background-blend-mode: initial\r\n    * --tjs-contents-background: none\r\n    * --tjs-contents-border: none\r\n    * --tjs-contents-margin: 0 0 0 -5px\r\n    *\r\n    * Padding is set directly by `--tjs-contents-padding` or follows the following calculation:\r\n    * `0 0 0 calc(var(--tjs-summary-font-size, 13px) * 0.8)`\r\n    *\r\n    * If neither `--tjs-contents-padding` or `--tjs-summary-font-size` is defined the default is `13px * 0.8`.\r\n    */\r\n\r\n   import { onDestroy } from 'svelte';\r\n\r\n   import { writable }  from 'svelte/store';\r\n\r\n   import {\r\n      applyStyles,\r\n      toggleDetails }   from '@typhonjs-fvtt/svelte-standard/action';\r\n\r\n   export let styles;\r\n\r\n   export let folder;\r\n   export let id = folder ? folder.id : void 0;\r\n   export let label = folder ? folder.label : '';\r\n   export let store = folder ? folder.store : writable(false);\r\n\r\n   let detailsEl;\r\n\r\n   $: id = typeof folder === 'object' ? folder.icon : typeof id === 'string' ? id : void 0;\r\n   $: label = typeof folder === 'object' ? folder.label : typeof label === 'string' ? label : '';\r\n   $: store = typeof folder === 'object' ? folder.store : typeof store === 'object' ? store : writable(false);\r\n\r\n   /**\r\n    * Create a CustomEvent with details object containing relevant element and props.\r\n    *\r\n    * @param {string}   type - Event name / type.\r\n    *\r\n    * @param {boolean}  [bubbles=false] - Does the event bubble.\r\n    *\r\n    * @returns {CustomEvent<object>}\r\n    */\r\n   function createEvent(type, bubbles = false)\r\n   {\r\n      return new CustomEvent(type, {\r\n         detail: {element: detailsEl, folder, id, label, store},\r\n         bubbles\r\n      });\r\n   }\r\n\r\n   // Manually subscribe to store in order to trigger only on changes; avoids initial dispatch on mount as `detailsEl`\r\n   // is not set yet. Directly dispatch custom events as Svelte 3 does not support bubbling of custom events by\r\n   // `createEventDispatcher`.\r\n   const unsubscribe = store.subscribe((value) =>\r\n   {\r\n      if (detailsEl)\r\n      {\r\n         detailsEl.dispatchEvent(createEvent(value ? 'open' : 'close'));\r\n         detailsEl.dispatchEvent(createEvent(value ? 'openAny' : 'closeAny', true));\r\n      }\r\n   });\r\n\r\n   onDestroy(unsubscribe);\r\n</script>\r\n\r\n<details class=tjs-folder\r\n         bind:this={detailsEl}\r\n         on:click\r\n         on:open\r\n         on:close\r\n         on:openAny\r\n         on:closeAny\r\n         use:toggleDetails={store}\r\n         use:applyStyles={styles}\r\n         data-id={id}\r\n         data-label={label}\r\n         data-closing='false'>\r\n    <summary>\r\n        <svg viewBox=\"0 0 24 24\">\r\n            <path\r\n                fill=currentColor\r\n                stroke=currentColor\r\n                style=\"stroke-linejoin: round; stroke-width: 3;\"\r\n                d=\"M5,8L19,8L12,15Z\"\r\n            />\r\n        </svg>\r\n\r\n        <slot name=label>{label}</slot>\r\n\r\n        <slot name=\"summary-end\"></slot>\r\n    </summary>\r\n\r\n    <div class=contents>\r\n        <slot></slot>\r\n    </div>\r\n</details>\r\n\r\n<style>\r\n    details {\r\n        margin-left: -5px;\r\n        padding-left: var(--tjs-details-padding-left, 5px); /* Set for children folders to increase indent */\r\n    }\r\n\r\n    summary {\r\n        display: flex;\r\n        position: relative;\r\n        align-items: center;\r\n        background-blend-mode: var(--tjs-summary-background-blend-mode, initial);\r\n        background: var(--tjs-summary-background, none);\r\n        border: var(--tjs-summary-border, none);\r\n        cursor: var(--tjs-summary-cursor, pointer);\r\n        font-size: var(--tjs-summary-font-size, inherit);\r\n        font-weight: var(--tjs-summary-font-weight, bold);\r\n        list-style: none;\r\n        margin: 0 0 0 -5px;\r\n        padding: var(--tjs-summary-padding, 4px) 0;\r\n        user-select: none;\r\n        width: var(--tjs-summary-width, fit-content);\r\n    }\r\n\r\n    summary svg {\r\n        width: var(--tjs-summary-chevron-size, var(--tjs-summary-font-size, 15px));\r\n        height: var(--tjs-summary-chevron-size, var(--tjs-summary-font-size, 15px));\r\n        color: var(--tjs-summary-chevron-color, currentColor);\r\n        opacity: var(--tjs-summary-chevron-opacity, 0.2);\r\n        margin: 0 5px 0 0;\r\n        transition: opacity 0.2s, transform 0.1s;\r\n        transform: rotate(var(--tjs-summary-chevron-rotate-closed, -90deg));\r\n    }\r\n\r\n    summary:hover svg {\r\n        opacity: var(--tjs-summary-chevron-opacity-hover, 1);\r\n    }\r\n\r\n    [open]:not(details[data-closing='true']) > summary svg {\r\n        transform: rotate(var(--tjs-summary-chevron-rotate-open, 0));\r\n    }\r\n\r\n    .contents {\r\n        position: relative;\r\n        background-blend-mode: var(--tjs-contents-background-blend-mode, initial);\r\n        background: var(--tjs-contents-background, none);\r\n        border: var(--tjs-contents-border, none);\r\n        margin: var(--tjs-contents-margin, 0 0 0 -5px);\r\n        padding: var(--tjs-contents-padding, 0 0 0 calc(var(--tjs-summary-font-size, 13px) * 0.8));\r\n    }\r\n\r\n    .contents::before {\r\n        content: '';\r\n        position: absolute;\r\n        width: 0;\r\n        height: calc(100% + 8px);\r\n        left: 0;\r\n        top: -8px;\r\n    }\r\n\r\n    summary:focus-visible + .contents::before {\r\n        height: 100%;\r\n        top: 0;\r\n    }\r\n</style>\r\n","<script>\r\n   import {\r\n      getContext\r\n   }                    from 'svelte';\r\n   import { quintOut }  from 'svelte/easing';\r\n\r\n   import { localize }  from '@typhonjs-svelte/lib/helper';\r\n   import { slideFade } from '@typhonjs-svelte/lib/transition';\r\n\r\n   const s_DEFAULT_OFFSET = { x: 0, y: 0 };\r\n\r\n   export let menu;\r\n   export let items;\r\n   export let offset;\r\n   export let styles;\r\n   export let efx;\r\n   export let transitionOptions;\r\n\r\n   $: items = typeof menu === 'object' && Array.isArray(menu.items) ? menu.items :\r\n    Array.isArray(items) ? items : [];\r\n   $: offset = typeof menu === 'object' && typeof menu.offset === 'object' ? menu.offset :\r\n    typeof offset === 'object' ? offset : s_DEFAULT_OFFSET;\r\n   $: styles = typeof menu === 'object' && typeof menu.styles === 'object' ? menu.styles :\r\n    typeof styles === 'object' ? styles : void 0;\r\n   $: efx = typeof menu === 'object' && typeof menu.efx === 'function' ? menu.efx :\r\n    typeof efx === 'function' ? efx : () => {};\r\n   $: transitionOptions =\r\n    typeof menu === 'object' && typeof menu.transitionOptions === 'object' ? menu.transitionOptions :\r\n     typeof transitionOptions === 'object' ? transitionOptions : { duration: 200, easing: quintOut };\r\n\r\n   const storeElementRoot = getContext('storeElementRoot');\r\n\r\n   // Bound to the nav element / menu.\r\n   let menuEl;\r\n\r\n   // Stores if this context menu is closed.\r\n   let closed = false;\r\n\r\n   /**\r\n    * Provides a custom transform allowing inspection of the element to change positioning styles based on the\r\n    * height / width of the element and the containing `element root`. This allows the menu to expand left or right when\r\n    * the menu exceeds the bounds of the containing `element root`.\r\n    *\r\n    * @param {HTMLElement} node - nav element.\r\n    *\r\n    * @returns {object} Transition object.\r\n    */\r\n   function animate(node)\r\n   {\r\n      const elementRoot = $storeElementRoot;\r\n      if (!elementRoot) { return; }\r\n\r\n      const elementRootRect = elementRoot.getBoundingClientRect();\r\n      const elementRootRight = elementRootRect.x + elementRootRect.width;\r\n\r\n      const nodeRect = node.getBoundingClientRect();\r\n      const parentRect = node.parentElement.getBoundingClientRect();\r\n\r\n      const parentRight = parentRect.x + parentRect.width;\r\n\r\n      const adjustedOffset = {...s_DEFAULT_OFFSET, ...offset};\r\n\r\n      node.style.top = `${adjustedOffset.y + parentRect.top + parentRect.height - elementRootRect.top}px`;\r\n\r\n      // Check to make sure that the menu width does not exceed the right side of the element root. If not open right.\r\n      if (parentRect.x + nodeRect.width < elementRootRight)\r\n      {\r\n         node.style.left = `${adjustedOffset.x + parentRect.x - elementRootRect.x}px`;\r\n         node.style.removeProperty('right');\r\n      }\r\n      else // Open left.\r\n      {\r\n         node.style.right = `${elementRootRight - parentRight}px`;\r\n         node.style.removeProperty('left');\r\n      }\r\n\r\n      return slideFade(node, transitionOptions);\r\n   }\r\n\r\n   /**\r\n    * Invokes a function on click of a menu item then fires the `close` event and automatically runs the outro\r\n    * transition and destroys the component.\r\n    *\r\n    * @param {function} callback - Function to invoke on click.\r\n    */\r\n   function onClick(callback)\r\n   {\r\n      if (typeof callback === 'function')\r\n      { callback(); }\r\n\r\n      if (!closed)\r\n      {\r\n         menuEl.dispatchEvent(new CustomEvent('close', {bubbles: true}));\r\n         closed = true;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Determines if a pointer pressed to the document body closes the menu. If the click occurs outside the\r\n    * menu then fire the `close` event and run the outro transition then destroy the component.\r\n    *\r\n    * @param {PointerEvent}   event - Pointer event from document body click.\r\n    */\r\n   async function onClose(event)\r\n   {\r\n      // Early out if the pointer down is inside the menu element.\r\n      if (event.target === menuEl || menuEl.contains(event.target)) { return; }\r\n\r\n      if (event.target === menuEl.parentElement || menuEl.parentElement.contains(event.target)) { return; }\r\n\r\n      if (!closed)\r\n      {\r\n         closed = true;\r\n         menuEl.dispatchEvent(new CustomEvent('close', {bubbles: true}));\r\n      }\r\n   }\r\n</script>\r\n\r\n<!-- bind to `document.body` to receive pointer down events to close the context menu. -->\r\n<svelte:body on:pointerdown={onClose}/>\r\n\r\n<nav class=tjs-menu\r\n     bind:this={menuEl}\r\n     transition:animate\r\n     use:efx>\r\n   <ol class=tjs-menu-items>\r\n      {#each items as item}\r\n         <li class=tjs-menu-item on:click={() => onClick(item.onclick)}>\r\n            <i class={item.icon}></i>{localize(item.label)}\r\n         </li>\r\n      {/each}\r\n   </ol>\r\n</nav>\r\n\r\n<style>\r\n   .tjs-menu {\r\n      position: absolute;\r\n      width: fit-content;\r\n      height: max-content;\r\n\r\n      box-shadow: 0 0 2px var(--color-shadow-dark, var(--typhonjs-color-shadow, #000));\r\n      background: var(--typhonjs-color-content-window, #23221d);\r\n      border: 1px solid var(--color-border-dark, var(--typhonjs-color-border, #000));\r\n      border-radius: 5px;\r\n      color: var(--color-text-light-primary, var(--typhonjs-color-text-secondary, #EEE));\r\n   }\r\n\r\n   .tjs-menu ol.tjs-menu-items {\r\n      list-style: none;\r\n      margin: 0;\r\n      padding: 0;\r\n   }\r\n\r\n   .tjs-menu li.tjs-menu-item {\r\n      padding: 0 5px;\r\n      line-height: 32px;\r\n   }\r\n\r\n   .tjs-menu li.tjs-menu-item:hover {\r\n      color: var(--typhonjs-color-text-primary, #FFF);\r\n      text-shadow: 0 0 4px var(--color-text-hyperlink, var(--typhonjs-color-accent-tertiary, red));\r\n   }\r\n\r\n   .tjs-menu li.tjs-menu-item > i {\r\n      margin-right: 5px;\r\n   }\r\n</style>\r\n","<script>\r\n   import { createEventDispatcher } from 'svelte';\r\n   import { current_component }     from 'svelte/internal';\r\n\r\n   import { localize }              from '@typhonjs-svelte/lib/helper';\r\n   import { slideFade }             from '@typhonjs-svelte/lib/transition';\r\n   import { outroAndDestroy }       from '@typhonjs-svelte/lib/util';\r\n\r\n   export let id = '';\r\n   export let x = 0;\r\n   export let y = 0;\r\n   export let items = [];\r\n   export let zIndex = 10000;\r\n   export let transitionOptions = void 0;\r\n\r\n   // Bound to the nav element / menu.\r\n   let menuEl;\r\n\r\n   // Store this component reference.\r\n   const local = current_component;\r\n\r\n   // Dispatches `close` event.\r\n   const dispatch = createEventDispatcher();\r\n\r\n   // Stores if this context menu is closed.\r\n   let closed = false;\r\n\r\n   /**\r\n    * Provides a custom animate callback allowing inspection of the element to change positioning styles based on the\r\n    * height / width of the element and `document.body`. This allows the context menu to expand up when the menu\r\n    * is outside the height bound of `document.body` and expand to the left if width is greater than `document.body`.\r\n    *\r\n    * @param {HTMLElement} node - nav element.\r\n    *\r\n    * @returns {object} Transition object.\r\n    */\r\n   function animate(node)\r\n   {\r\n      const expandUp = y + node.clientHeight > document.body.clientHeight\r\n      const expandLeft = x + node.clientWidth > document.body.clientWidth\r\n\r\n      node.style.top = expandUp ? null : `${y}px`;\r\n      node.style.bottom = expandUp ? `${document.body.clientHeight - y}px` : null;\r\n\r\n      node.style.left = expandLeft ? null : `${x}px`;\r\n      node.style.right = expandLeft ? `${document.body.clientWidth - x}px` : null;\r\n\r\n      return slideFade(node, transitionOptions);\r\n   }\r\n\r\n   /**\r\n    * Invokes a function on click of a menu item then fires the `close` event and automatically runs the outro\r\n    * transition and destroys the component.\r\n    *\r\n    * @param {function} callback - Function to invoke on click.\r\n    */\r\n   function onClick(callback)\r\n   {\r\n      if (typeof callback === 'function') { callback(); }\r\n\r\n      if (!closed)\r\n      {\r\n         dispatch('close');\r\n         closed = true;\r\n         outroAndDestroy(local);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Determines if a pointer pressed to the document body closes the context menu. If the click occurs outside the\r\n    * context menu then fire the `close` event and run the outro transition then destroy the component.\r\n    *\r\n    * @param {PointerEvent}   event - Pointer event from document body click.\r\n    */\r\n   async function onClose(event)\r\n   {\r\n      // Early out if the pointer down is inside the menu element.\r\n      if (event.target === menuEl || menuEl.contains(event.target)) { return; }\r\n\r\n      // Early out if the event page X / Y is the same as this context menu.\r\n      if (Math.floor(event.pageX) === x && Math.floor(event.pageY) === y) { return; }\r\n\r\n      if (!closed)\r\n      {\r\n         dispatch('close');\r\n         closed = true;\r\n         outroAndDestroy(local);\r\n      }\r\n   }\r\n</script>\r\n<!-- bind to `document.body` to receive pointer down events to close the context menu. -->\r\n<svelte:body on:pointerdown={onClose}/>\r\n\r\n<nav id={id} class=tjs-context-menu transition:animate bind:this={menuEl} style=\"z-index: {zIndex}\">\r\n    <ol class=tjs-context-items>\r\n        {#each items as item}\r\n            <li class=tjs-context-item on:click={() => onClick(item.onclick)}><i class={item.icon}></i>{localize(item.label)}</li>\r\n        {/each}\r\n    </ol>\r\n</nav>\r\n\r\n<style>\r\n    .tjs-context-menu {\r\n        position: fixed;\r\n        width: fit-content;\r\n        font-size: 14px;\r\n        box-shadow: 0 0 10px var(--color-shadow-dark, var(--typhonjs-color-shadow, #000));\r\n        height: max-content;\r\n        min-width: 150px;\r\n        max-width: 360px;\r\n        background: var(--typhonjs-color-content-window, #23221d);\r\n        border: 1px solid var(--color-border-dark, var(--typhonjs-color-border, #000));\r\n        border-radius: 5px;\r\n        color: var(--color-text-light-primary, var(--typhonjs-color-text-secondary, #EEE));\r\n    }\r\n\r\n    .tjs-context-menu ol.tjs-context-items {\r\n        list-style: none;\r\n        margin: 0;\r\n        padding: 0;\r\n    }\r\n\r\n    .tjs-context-menu li.tjs-context-item {\r\n        padding: 0 5px;\r\n        line-height: 32px;\r\n    }\r\n\r\n    .tjs-context-menu li.tjs-context-item:hover {\r\n        color: var(--typhonjs-color-text-primary, #FFF);\r\n        text-shadow: 0 0 4px var(--color-text-hyperlink, var(--typhonjs-color-accent-tertiary, red));\r\n    }\r\n\r\n    .tjs-context-menu li.tjs-context-item > i {\r\n        margin-right: 5px;\r\n    }\r\n</style>\r\n","<script>\r\n   /**\r\n    * --tjs-input-border\r\n    * --tjs-input-border-radius\r\n    * --tjs-input-background\r\n    * --tjs-input-cursor\r\n    * --tjs-input-height\r\n    * --tjs-input-width\r\n    *\r\n    * --tjs-comp-select-border\r\n    * --tjs-comp-select-border-radius\r\n    * --tjs-comp-select-background\r\n    * --tjs-comp-select-cursor\r\n    * --tjs-comp-select-height\r\n    * --tjs-comp-select-width\r\n    */\r\n\r\n   import { onMount }      from 'svelte';\r\n   import { writable }     from 'svelte/store';\r\n   import {\r\n      autoBlur,\r\n      applyStyles }        from '@typhonjs-fvtt/svelte-standard/action';\r\n\r\n   export let select;\r\n   export let selected;\r\n   export let options;\r\n   export let store;\r\n   export let styles;\r\n   export let efx;\r\n\r\n   $: selected = typeof select === 'object' && typeof select.selected === 'string' ? select.selected :\r\n    typeof selected === 'string' ? selected : void 0;\r\n   $: options = typeof select === 'object' && Array.isArray(select.options) ? select.options :\r\n    Array.isArray(options) ? options : [];\r\n   $: store = typeof select === 'object' && typeof select.store === 'object' ? select.store :\r\n    typeof store === 'object' ? store : writable(void 0);\r\n   $: styles = typeof select === 'object' && typeof select.styles === 'object' ? select.styles :\r\n    typeof styles === 'object' ? styles : void 0;\r\n   $: efx = typeof select === 'object' && typeof select.efx === 'function' ? select.efx :\r\n    typeof efx === 'function' ? efx : () => {};\r\n\r\n   onMount(() =>\r\n   {\r\n      // On mount verify that the current store value is included in options otherwise check the `selected` value if set\r\n      // and if this initial value is in the list of options then set it as the default option.\r\n      if (selected && store && !options.includes($store) && options.includes(selected)) { store.set(selected); }\r\n   });\r\n</script>\r\n\r\n<div class=tjs-select-container use:efx use:applyStyles={styles}>\r\n<select class=tjs-select bind:value={$store} use:autoBlur>\r\n   {#each options as option}\r\n      <option class=tjs-select-option value={option}>\r\n         {option}\r\n      </option>\r\n   {/each}\r\n</select>\r\n</div>\r\n\r\n<style>\r\n   .tjs-select-container {\r\n      background: var(--tjs-comp-select-background, var(--tjs-input-background));\r\n      border-radius: var(--tjs-comp-select-border-radius, var(--tjs-input-border-radius));\r\n      display: block;\r\n      overflow: hidden;\r\n      height: var(--tjs-comp-select-height, var(--tjs-input-height));\r\n      width: var(--tjs-comp-select-width, var(--tjs-input-width));\r\n      transform-style: preserve-3d;\r\n   }\r\n\r\n   select {\r\n      display: inline-block;\r\n      position: relative;\r\n      overflow: hidden;\r\n\r\n      background: transparent;\r\n\r\n      border: var(--tjs-comp-select-border, var(--tjs-input-border));\r\n      border-radius: var(--tjs-comp-select-border-radius, var(--tjs-input-border-radius));\r\n\r\n      width: 100%;\r\n      height: 100%;\r\n\r\n      color: inherit;\r\n      font-family: inherit;\r\n      font-size: inherit;\r\n      line-height: inherit;\r\n\r\n      cursor: var(--tjs-comp-select-cursor, var(--tjs-input-cursor));\r\n\r\n      transform: translateZ(1px);\r\n   }\r\n\r\n   select option {\r\n      background: var(--tjs-comp-select-background, var(--tjs-input-background));\r\n      color: inherit;\r\n   }\r\n</style>\r\n","<script>\r\n   /**\r\n    * StylesProperties is a slotted component that simply wraps the slot in a DIV element and uses `applyStyles` to\r\n    * load the prop `styles` into inline styles. `styles` is an object with `property / value` pairs.\r\n    *\r\n    * This is useful if you need to set local CSS variables for a group of children components for instance rather than\r\n    * direct CSS props.\r\n    */\r\n\r\n   import { applyStyles } from '@typhonjs-fvtt/svelte-standard/action';\r\n\r\n   export let styles;\r\n</script>\r\n\r\n<div use:applyStyles={styles}>\r\n    <slot/>\r\n</div>\r\n","import { cssVariables, FoundryStyles }    from '#internal';\r\n\r\nexport { default as TJSToggleIconButton } from './button/TJSToggleIconButton.svelte';\r\nexport { default as TJSFolder }           from './folder/TJSFolder.svelte';\r\nexport { default as TJSMenu }             from './menu/TJSMenu.svelte';\r\nexport { default as TJSContextMenu }      from './menu/context/TJSContextMenu.svelte';\r\nexport { default as TJSSelect }           from './select/TJSSelect.svelte';\r\nexport { default as TJSStyleProperties }  from './TJSStyleProperties.svelte';\r\n\r\n/**\r\n * Assign all TyphonJS CSS variables to Foundry defaults.\r\n */\r\n\r\ncssVariables.set({\r\n   '--tjs-action-ripple-background': 'rgba(0, 0, 0, 0.35)'\r\n});\r\n\r\n// -------------------------------------------------------------------------------------------------------------------\r\n\r\ncssVariables.set({\r\n   '--tjs-icon-button-background': 'none',\r\n   '--tjs-icon-button-background-hover': 'rgba(0, 0, 0, 0.10)',\r\n   '--tjs-icon-button-background-selected': 'rgba(0, 0, 0, 0.20)',\r\n   '--tjs-icon-button-border-radius': '50%',\r\n   '--tjs-icon-button-clip-path': 'none',\r\n   '--tjs-icon-button-diameter': '2em',\r\n   '--tjs-icon-button-transition': 'background 200ms linear'\r\n});\r\n\r\n{\r\n   /**\r\n    * All input related components including: TJSSelect,\r\n    */\r\n   const props = FoundryStyles.getProperties('input[type=\"text\"], input[type=\"number\"]');\r\n\r\n   cssVariables.set({\r\n      '--tjs-input-background': 'background' in props ? props.background : 'rgba(0, 0, 0, 0.05)',\r\n      '--tjs-input-border': 'border' in props ? props.border : '1px solid var(--color-border-light-tertiary)',\r\n      '--tjs-input-border-radius': 'border-radius' in props ? props['border-radius'] : '3px',\r\n      '--tjs-input-cursor': 'pointer',\r\n      '--tjs-input-height': 'height' in props ? props.height : 'var(--form-field-height)',\r\n      '--tjs-input-min-width': 'min-width' in props ? props['min-width'] : '20px',\r\n      '--tjs-input-width': 'width' in props ? props.width : 'calc(100% - 2px)'\r\n   });\r\n}\r\n"],"names":[],"mappings":"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"}